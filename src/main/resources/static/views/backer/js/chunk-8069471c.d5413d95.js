(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8069471c"],{"3b2b":function(e,t,a){var o=a("7726"),n=a("5dbc"),r=a("86cc").f,i=a("9093").f,c=a("aae3"),s=a("0bfb"),l=o.RegExp,d=l,u=l.prototype,h=/a/g,f=/a/g,p=new l(h)!==h;if(a("9e1e")&&(!p||a("79e5")(function(){return f[a("2b4c")("match")]=!1,l(h)!=h||l(f)==f||"/a/i"!=l(h,"i")}))){l=function(e,t){var a=this instanceof l,o=c(e),r=void 0===t;return!a&&o&&e.constructor===l&&r?e:n(p?new d(o&&!r?e.source:e,t):d((o=e instanceof l)?e.source:e,o&&r?s.call(e):t),a?this:u,l)};for(var g=function(e){e in l||r(l,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},m=i(d),w=0;m.length>w;)g(m[w++]);u.constructor=l,l.prototype=u,a("2aba")(o,"RegExp",l)}a("7a56")("RegExp")},eb10:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"top"},[a("div"),a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.drawerShow=!0}}},[e._v("添加")])],1),a("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading,bordered:""},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,o){return[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.show(o)}}},[e._v("查看")]),a("a-button",{staticStyle:{margin:"0 5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showAccess(o)}}},[e._v("权限")]),a("a-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.remove(o)}}},[e._v("删除")])]}}])}),a("a-drawer",{attrs:{title:"角色",width:720,visible:e.drawerShow,wrapStyle:{height:"calc(100% - 108px)",overflow:"auto",paddingBottom:"108px"}},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form,layout:"vertical",hideRequiredMark:""}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"角色名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}]})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"角色键值"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["role_key"],expression:"['role_key']"}]})],1)],1)],1)],1),a("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.onClose}},[e._v("保存")])],1)],1),a("Drawer",{attrs:{title:"角色权限",width:"720","mask-closable":!1,styles:e.styles},on:{"on-close":e.clearDrawer},model:{value:e.drawerShowAccess,callback:function(t){e.drawerShowAccess=t},expression:"drawerShowAccess"}},[a("a-tree",{attrs:{checkable:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,selectedKeys:e.selectedKeys,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect},model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}}),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("formData")}}},[e._v("保存")])],1)],1)],1)},n=[],r=(a("7f7f"),a("cebc")),i=a("f4e6"),c={name:"roles",data:function(){return{columns:[{title:"编号",dataIndex:"id"},{title:"角色",dataIndex:"name"},{title:"状态",dataIndex:"status"},{title:"操作",dataIndex:"operation",width:"200px",scopedSlots:{customRender:"operation"}}],data:[],pagination:{},loading:!1,drawerShow:!1,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},formData:{},ruleValidate:i["c"],drawerShowAccess:!1,expandedKeys:["0-0-0","0-0-1"],autoExpandParent:!0,checkedKeys:["0-0-0"],selectedKeys:[],treeData:[],form:this.$form.createForm(this)}},methods:{getTreeData:function(){var e=this;this.$ajax({url:"perms/selectPermsTreeData"}).then(function(t){1===t.data.code&&(e.treeData=t.data.data)})},showDrawer:function(){this.drawerShow=!0},onClose:function(){this.drawerShow=!1},handleTableChange:function(e,t,a){console.log(e);var o=Object(r["a"])({},this.pagination);o.current=e.current,this.pagination=o,this.fetch(Object(r["a"])({limit:e.pageSize,page:e.current},t))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("params:",t),this.loading=!0,this.$ajax({url:"role/listRole",data:Object(r["a"])({},t)}).then(function(t){var a=Object(r["a"])({},e.pagination);a.total=t.data.count,e.loading=!1,e.data=t.data.data,e.pagination=a})},clearDrawer:function(){this.formData={}},show:function(e){this.formData=e,this.drawerShow=!0},showAccess:function(e){this.drawerShowAccess=!0},submit:function(e){var t=this;this.$refs[e].validate(function(e){e?(delete t.formData._index,delete t.formData._rowKey,t.$ajax({url:t.formData.id?"role/updateRole":"role/addRole",data:t.formData}).then(function(e){1===e.data.code?(t.$Notice.success({title:e.data.msg}),t.pageChange(t.currPage),t.drawerShow=!1):t.$Notice.error({title:e.data.msg})})):t.$Message.error("Fail!")})},remove:function(e){var t=this;this.$confirm({title:"提示",content:"确定要删除吗 ?",okText:"确认",cancelText:"取消",onOk:function(){t.$ajax({url:"role/deleteRole",data:{id:e.id}}).then(function(e){1===e.data.code?(t.$Notice.success({title:e.data.msg}),t.pageChange(t.currPage)):t.$Notice.error({title:e.data.msg})})},onCancel:function(){},class:"test"})},onExpand:function(e){console.log("onExpand",e),this.expandedKeys=e,this.autoExpandParent=!1},onCheck:function(e){console.log("onCheck",e),this.checkedKeys=e},onSelect:function(e,t){console.log("onSelect",t),this.selectedKeys=e}},mounted:function(){this.fetch({page:1,limit:10}),this.getTreeData()},watch:{checkedKeys:function(e){console.log(e)}}},s=c,l=a("2877"),d=Object(l["a"])(s,o,n,!1,null,"49fdfc92",null);t["default"]=d.exports},f4e6:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r});a("3b2b"),a("a481");function o(e){return-1==e?"订单取消":0==e?"待付款":1==e?"已付款，待发货":2==e?"已发货":3==e?"已签收":4==e?"已完成":5==e?"退货中":6==e?"退货审核通过":7==e?"退货审核不通过":void 0}function n(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return t}var r={}}}]);