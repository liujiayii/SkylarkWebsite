(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c94fa"],{5933:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"top"},[e("div"),e("a-button",{attrs:{type:"primary",shape:"circle",icon:"plus"},on:{click:function(t){a.drawerShow=!0}}},[a._v("添加")])],1),e("a-table",{attrs:{columns:a.columns,rowKey:function(a){return a.id},dataSource:a.tableData,pagination:a.pagination,loading:a.loading,bordered:""},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"operation",fn:function(t,n){return[e("a-button",{staticStyle:{"margin-right":"6px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return a.showDrawer(n)}}},[a._v("查看")]),e("a-popconfirm",{attrs:{title:"确定删除？",cancelText:"取消",okText:"确认"},on:{confirm:function(t){return a.remove(n)}}},[e("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),e("a-button",{attrs:{type:"danger",size:"small"}},[a._v("删除")])],1)]}}])}),e("a-drawer",{attrs:{title:"版本控制",width:720,visible:a.drawerShow,wrapClassName:"drawer-cont",destroyOnClose:""},on:{close:function(){return a.drawerShow=!1}}},[e("a-form",{attrs:{form:a.form},on:{submit:a.handleSubmit}},[e("a-form-item",{attrs:{label:"版本"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_type"],expression:"['app_type']"}]},[e("a-select-option",{attrs:{value:"0"}},[a._v("安卓")]),e("a-select-option",{attrs:{value:"1"}},[a._v("IOS")])],1)],1),e("a-form-item",{attrs:{label:"版本号"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_version"],expression:"['app_version']"}]})],1),e("a-form-item",{attrs:{label:"软件名称"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["app_name"],expression:"['app_name']"}]})],1),e("a-form-item",[e("a-upload",{attrs:{action:"",beforeUpload:a.handleChange,showUploadList:!1}},[e("a-button",[e("a-icon",{attrs:{type:"upload"}}),a._v("\n            安卓版本请上传安装包\n          ")],1)],1),null!=a.file?e("p",[a._v(a._s(a.file.name))]):a._e()],1),e("div",{staticClass:"drawer-footer"},[e("a-button",{style:{marginRight:"8px"},on:{click:function(){return a.drawerShow=!1}}},[a._v("取消")]),e("a-button",{attrs:{type:"primary","html-type":"submit"}},[a._v("保存")])],1)],1)],1)],1)},i=[],o=e("cebc"),r={name:"version",data:function(){return{columns:[{title:"安装包类型",dataIndex:"app_type",customRender:function(a,t,e){return"0"===a?"安卓版本":"IOS版本"}},{title:"名称",dataIndex:"app_name"},{title:"内部版本号",dataIndex:"app_cood"},{title:"路径",dataIndex:"app_url",width:"50%"},{title:"版本",dataIndex:"app_version"}],tableData:[],pagination:{},loading:!1,drawerShow:!1,form:this.$form.createForm(this),file:null}},methods:{handleSubmit:function(a){var t=this;a.preventDefault(),this.form.validateFields(function(a,e){if(!a){var n=new FormData;0==e.app_type&&n.append("pic",t.file),n.append("app_version",e.app_version),n.append("app_name",e.app_name),n.append("app_type",e.app_type),n.append("app_cood",1),t.$ajax_({url:"t_app/inserttapp",data:n}).then(function(a){1===a.data.code?(t.$message.success(a.data.msg),t.fetch(t.pagination),t.drawerShow=!1):t.$message.error(a.data.msg)})}})},showDrawer:function(a){var t=this;this.drawerShow=!0,setTimeout(function(){t.form.setFieldsValue(a)},500)},handleTableChange:function(a,t,e){console.log(a);var n=Object(o["a"])({},this.pagination);n.current=a.current,this.pagination=n,this.fetch(Object(o["a"])({limit:a.pageSize,page:a.current},t))},fetch:function(){var a=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.page=t.page||t.current||1,t.limit=t.limit||10,this.loading=!0,this.$ajax({url:"t_app/insertlist",data:Object(o["a"])({},t)}).then(function(t){var e=Object(o["a"])({},a.pagination);e.total=t.data.count,a.loading=!1,a.tableData=t.data.data,a.pagination=e})},remove:function(a){var t=this;this.$ajax({url:"delOne",data:{id:a.id}}).then(function(a){1===a.data.code&&(t.$message.success(a.data.msg),t.fetch(t.pagination))})},handleChange:function(a,t){return this.file=a,!1}},mounted:function(){this.fetch()}},s=r,p=e("2877"),c=Object(p["a"])(s,n,i,!1,null,"65aea02e",null);t["default"]=c.exports}}]);