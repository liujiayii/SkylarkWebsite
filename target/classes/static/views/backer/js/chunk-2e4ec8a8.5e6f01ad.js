(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e4ec8a8"],{2509:function(t,a,e){},"3b2b":function(t,a,e){var o=e("7726"),r=e("5dbc"),s=e("86cc").f,i=e("9093").f,c=e("aae3"),n=e("0bfb"),l=o.RegExp,d=l,u=l.prototype,p=/a/g,m=/a/g,f=new l(p)!==p;if(e("9e1e")&&(!f||e("79e5")(function(){return m[e("2b4c")("match")]=!1,l(p)!=p||l(m)==m||"/a/i"!=l(p,"i")}))){l=function(t,a){var e=this instanceof l,o=c(t),s=void 0===a;return!e&&o&&t.constructor===l&&s?t:r(f?new d(o&&!s?t.source:t,a):d((o=t instanceof l)?t.source:t,o&&s?n.call(t):a),e?this:u,l)};for(var h=function(t){t in l||s(l,t,{configurable:!0,get:function(){return d[t]},set:function(a){d[t]=a}})},g=i(d),b=0;g.length>b;)h(g[b++]);u.constructor=l,l.prototype=u,e("2aba")(o,"RegExp",l)}e("7a56")("RegExp")},dd9b:function(t,a,e){"use strict";var o=e("2509"),r=e.n(o);r.a},f4e6:function(t,a,e){"use strict";e.d(a,"a",function(){return r}),e.d(a,"b",function(){return o}),e.d(a,"c",function(){return s});e("3b2b"),e("a481");function o(t){return-1==t?"订单取消":0==t?"待付款":1==t?"已付款，待发货":2==t?"已发货":3==t?"已签收":4==t?"已完成":5==t?"退货中":6==t?"退货审核通过":7==t?"退货审核不通过":void 0}function r(t,a){var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),S:t.getMilliseconds()};for(var o in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+o+")").test(a)&&(a=a.replace(RegExp.$1,1===RegExp.$1.length?e[o]:("00"+e[o]).substr((""+e[o]).length)));return a}var s={}},ff66:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"top"},[e("Input",{staticStyle:{width:"300px"},attrs:{search:"",placeholder:"输入关键词搜索……"},on:{input:t.searchVal}}),e("a-button",{attrs:{type:"primary",shape:"circle",icon:"plus"},on:{click:function(a){t.drawerShow=!0}}},[t._v("添加")])],1),e("Table",{attrs:{border:"",columns:t.columns,data:t.tableData.data},scopedSlots:t._u([{key:"action",fn:function(a){var o=a.row;return[e("iSwitch",{attrs:{value:o.state,size:"large","true-value":1,"false-value":2},on:{"on-change":function(a){return t.stateUpdate(o)}}},[e("span",{attrs:{slot:"open"},slot:"open"},[t._v("上架")]),e("span",{attrs:{slot:"close"},slot:"close"},[t._v("下架")])]),e("a-button",{staticStyle:{margin:"0 5px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.show(o)}}},[t._v("查看")]),e("a-button",{attrs:{size:"small"},on:{click:function(a){return t.showSpecs(o)}}},[t._v("规格")])]}}])}),e("div",{staticClass:"page-box"},[e("Page",{attrs:{total:t.tableData.count,size:"small","show-elevator":"","show-total":""},on:{"on-change":t.pageChange}})],1),e("Drawer",{attrs:{title:"编辑",width:"740","mask-closable":!1,styles:t.styles},on:{"on-close":t.clearDrawer},model:{value:t.drawerShow,callback:function(a){t.drawerShow=a},expression:"drawerShow"}},[e("Form",{ref:"formData",attrs:{model:t.formData,rules:t.ruleValidate}},[e("Row",{attrs:{gutter:32}},[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"商品专区"}},[e("Select",{attrs:{size:"large"},model:{value:t.formData.zoneid,callback:function(a){t.$set(t.formData,"zoneid",a)},expression:"formData.zoneid"}},t._l(t.zoneList,function(a,o){return e("Option",{key:o,attrs:{value:a.id}},[t._v("\n                "+t._s(a.name)+"\n              ")])}),1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"满减优惠"}},[e("Select",{attrs:{size:"large"},model:{value:t.formData.discount_id,callback:function(a){t.$set(t.formData,"discount_id",a)},expression:"formData.discount_id"}},t._l(t.discountList,function(a,o){return e("Option",{key:o,attrs:{value:a.id}},[t._v("\n                满"+t._s(a.price)+"减"+t._s(a.money)+"\n              ")])}),1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"商品二级分类"}},[e("Select",{attrs:{size:"large"},model:{value:t.formData.producttypeid,callback:function(a){t.$set(t.formData,"producttypeid",a)},expression:"formData.producttypeid"}},t._l(t.sortList,function(a,o){return e("Option",{key:o,attrs:{value:a.id}},[t._v("\n                "+t._s(a.name)+"\n              ")])}),1)],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"品牌",prop:"brand"}},[e("Input",{attrs:{size:"large"},model:{value:t.formData.brand,callback:function(a){t.$set(t.formData,"brand",a)},expression:"formData.brand"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"商品名称",prop:"productName"}},[e("Input",{attrs:{size:"large"},model:{value:t.formData.productName,callback:function(a){t.$set(t.formData,"productName",a)},expression:"formData.productName"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"商品描述",prop:"describion"}},[e("Input",{attrs:{type:"textarea",size:"large"},model:{value:t.formData.describion,callback:function(a){t.$set(t.formData,"describion",a)},expression:"formData.describion"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"售后信息",prop:"describion"}},[e("Input",{attrs:{type:"textarea",size:"large"},model:{value:t.formData.after_information,callback:function(a){t.$set(t.formData,"after_information",a)},expression:"formData.after_information"}})],1)],1)],1),e("Upload",{attrs:{action:"/upload","on-success":t.handleUpload,format:["jpg","jpeg","png"],"on-format-error":t.formatError,"show-upload-list":!1}},[e("a-button",{attrs:{icon:"upload"}},[t._v("\n          上传商品小图\n        ")])],1),e("div",{staticClass:"img-cont"},[e("div",{staticClass:"img-box"},[e("img",{attrs:{src:t.formData.image,alt:""}})])]),e("Upload",{attrs:{action:"/addImg",multiple:"","on-success":t.handleUploadSec,format:["jpg","jpeg","png"],"on-format-error":t.formatError,"show-upload-list":!1}},[e("a-button",{attrs:{icon:"upload"}},[t._v("上传商品详情图")])],1),e("div",{staticClass:"img-cont"},t._l(t.fileList,function(a,o){return e("div",{key:o,staticClass:"img-box",on:{click:function(a){return t.delImg(o)}}},[e("div",{staticClass:"ico"},[e("a-icon",{attrs:{type:"delete",theme:"filled"}})],1),e("img",{attrs:{src:a,alt:""}})])}),0)],1),e("div",{staticClass:"demo-drawer-footer"},[e("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.submit("formData")}}},[t._v("保存")])],1)],1),e("Drawer",{attrs:{title:"编辑",width:"740","mask-closable":!1,styles:t.styles},on:{"on-close":t.clearDrawer},model:{value:t.drawerShowSpecs,callback:function(a){t.drawerShowSpecs=a},expression:"drawerShowSpecs"}},[e("div",{staticClass:"top"},[e("div"),e("a-button",{attrs:{type:"primary",shape:"circle",icon:"plus"},on:{click:function(a){t.specsFormShow=!t.specsFormShow}}},[t._v("添加")])],1),e("Table",{attrs:{border:"",columns:t.columnsSpecs,data:t.tableDataSpecs.data},scopedSlots:t._u([{key:"action",fn:function(a){var o=a.row;return[e("a-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.show(o)}}},[t._v("修改")]),e("a-button",{staticStyle:{"margin-right":"5px"},attrs:{type:"danger",size:"small"},on:{click:function(a){return t.showSpecs(o)}}},[t._v("删除")])]}}])}),e("Form",{directives:[{name:"show",rawName:"v-show",value:t.specsFormShow,expression:"specsFormShow"}],ref:"formDataSpecs",attrs:{model:t.formDataSpecs,rules:t.ruleValidate}},[e("Row",{attrs:{gutter:32}},[t._l(t.specsList,function(a,o){return[e("Col",{attrs:{span:"12"}},[e("FormItem",{key:o,attrs:{label:a.specificationsName}},[e("Input",{attrs:{size:"large"},on:{input:function(e){return t.updateSpecs(a.specificationsName,e)}}})],1)],1)]}),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"库存",prop:"brand"}},[e("Input",{attrs:{size:"large"},model:{value:t.formDataSpecs.number,callback:function(a){t.$set(t.formDataSpecs,"number",a)},expression:"formDataSpecs.number"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"销售价格",prop:"productName"}},[e("Input",{attrs:{size:"large"},model:{value:t.formDataSpecs.price,callback:function(a){t.$set(t.formDataSpecs,"price",a)},expression:"formDataSpecs.price"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"折扣价格",prop:"productName"}},[e("Input",{attrs:{size:"large"},model:{value:t.formDataSpecs.discount_price,callback:function(a){t.$set(t.formDataSpecs,"discount_price",a)},expression:"formDataSpecs.discount_price"}})],1)],1),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"成本价格",prop:"productName"}},[e("Input",{attrs:{size:"large"},model:{value:t.formDataSpecs.cost_price,callback:function(a){t.$set(t.formDataSpecs,"cost_price",a)},expression:"formDataSpecs.cost_price"}})],1)],1)],2),e("a-button",{attrs:{type:"primary"},on:{click:function(a){return t.submitSpecs("formDataSpecs")}}},[t._v("保存")])],1),e("div",{staticClass:"demo-drawer-footer"},[e("a-button",{attrs:{type:"primary"},on:{click:function(a){t.drawerShowSpecs=!1}}},[t._v("保存")])],1)],1)],1)},r=[],s=e("f499"),i=e.n(s),c=(e("7f7f"),e("bd86")),n=e("5176"),l=e.n(n),d=e("f4e6"),u={name:"Ware",data:function(){return{drawerShow:!1,drawerShowSpecs:!1,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},formData:{zoneid:0},ruleValidate:d["c"],columns:[{title:"编号",key:"id"},{title:"商品名称",key:"productName"},{title:"商品类型",key:"producttypename"},{title:"品牌",key:"brand"},{title:"操作",slot:"action",width:200,align:"center"}],columnsSpecs:[{title:"规格名称",key:"specificationName"},{title:"折扣价",key:"discount_price"},{title:"成本价",key:"cost_price"},{title:"价格(元)",key:"price"},{title:"库存",key:"number"}],tableData:{data:[],count:0},fileList:[],sortList:[],discountList:[],zoneList:[],currPage:1,specsList:[],tableDataSpecs:[],formDataSpecs:{specificationName:{}},specsFormShow:!1}},methods:{updateSpecs:function(t,a){console.log(t),console.log(a),this.formDataSpecs.specificationName=l()(this.formDataSpecs.specificationName,Object(c["a"])({},t,a))},searchVal:function(t){this.pageChange(1,t)},formatError:function(){this.$Notice.error({title:"文件格式错误"})},delImg:function(t){var a=this;this.$Modal.confirm({title:"提示",content:"<p>是否删除</p>",onOk:function(){a.formData.productImage[t].id&&a.$ajax({url:"deleteImg",data:{id:a.formData.productImage[t].id}}).then(function(t){1!==t.data.code&&a.$Notice.error({title:t.data.msg})}),a.fileList.splice(t,1)},onCancel:function(){}})},clearDrawer:function(){this.formData={zoneid:-1},this.fileList=[],this.formDataSpecs={specificationName:{}}},handleUpload:function(t){this.formData.image=t.data},handleUploadSec:function(t){this.fileList.push(t.data[0])},show:function(t){var a=this;this.$ajax({url:"listProductByProductIds",data:{productId:t.id}}).then(function(t){if(1===t.data.code){a.formData=t.data.data.result,a.formData.discount_id=t.data.data.s1.discountid;for(var e=0;e<t.data.data.result.productImage.length;e++)a.fileList.push(t.data.data.result.productImage[e].img)}else a.$Notice.error({title:t.data.msg})}),this.drawerShow=!0},showSpecs:function(t){var a=this;this.drawerShowSpecs=!0,this.formDataSpecs.product_id=t.id,this.$ajax({method:"post",url:"selectAllspecifi",data:{product_id:t.id}}).then(function(t){1===t.data.code?a.tableDataSpecs=t.data:a.$Notice.error({title:t.data.msg})}).catch(function(t){a.$Notice.error({title:t.data.msg})}),this.$ajax({method:"post",url:"listSpecificationsByproducttypeid",data:{producttypeid:t.producttypeid,page:1,limit:100}}).then(function(t){1===t.data.code?a.specsList=t.data.data[0].specificationOptionsListss:a.$Notice.error({title:t.data.msg})}).catch(function(t){a.$Notice.error({title:t.data.msg})})},pageChange:function(t,a){var e=this;this.currPage=t,this.$ajax({method:"post",url:void 0!=a?"listProductByProductTypeId":"listAllProductById",data:{page:t,limit:10,productName:a}}).then(function(t){1===t.data.code?e.tableData=t.data:e.$Notice.error({title:t.data.msg})}).catch(function(t){e.$Notice.error({title:t.data.msg})})},stateUpdate:function(t){var a=this;this.$ajax({method:"post",url:"updateProductState",data:{id:t.id,state:1==t.state?2:1}}).then(function(e){1===e.data.code?(t.state=1==t.state?2:1,a.$Notice.success({title:e.data.msg})):a.$Notice.error({title:e.data.msg})}).catch(function(t){a.$Notice.error({title:t.data.msg})})},submit:function(t){var a=this;this.$refs[t].validate(function(t){t?(delete a.formData._index,delete a.formData._rowKey,delete a.formData.page,delete a.formData.limit,delete a.formData.productImage,delete a.formData.create_times,a.formData["file"]=a.fileList,a.$ajax({method:"post",url:a.formData.productId?"updateProduct":"addproductService",data:a.formData}).then(function(t){1===t.data.code?(a.$Notice.success({title:t.data.msg}),a.drawerShow=!1,a.pageChange(a.currPage),a.fileList=[],a.clearDrawer()):a.$Notice.error({title:t.data.msg})}).catch(function(t){a.$Notice.error({title:t.data.msg})})):a.$Message.error("Fail!")})},getClass:function(){var t=this;this.$ajax({method:"post",url:"selectAllProductTypeList",data:{page:1,limit:100}}).then(function(a){1===a.data.code?t.sortList=a.data.data:t.$Notice.error({title:a.data.msg})}).catch(function(a){t.$Notice.error({title:a.data.msg})})},getDiscount:function(){var t=this;this.$ajax({method:"post",url:"pageOfDiscount",data:{page:1,limit:100}}).then(function(a){1===a.data.code?t.discountList=a.data.data:t.$Notice.error({title:a.data.msg})}).catch(function(a){t.$Notice.error({title:a.data.msg})})},getZone:function(){var t=this;this.$ajax({method:"post",url:"selectZoneList",data:{page:1,limit:100}}).then(function(a){1===a.data.code?t.zoneList=a.data.data:t.$Notice.error({title:a.data.msg})}).catch(function(a){t.$Notice.error({title:a.data.msg})})},submitSpecs:function(t){var a=this;this.$refs[t].validate(function(t){t?(a.formDataSpecs.specificationName=i()(a.formDataSpecs.specificationName),a.$ajax({method:"post",url:"addSpecificationService",data:a.formDataSpecs}).then(function(t){1===t.data.code?(a.$Notice.success({title:t.data.msg}),a.clearDrawer()):a.$Notice.error({title:t.data.msg})}).catch(function(t){a.$Notice.error({title:t.data.msg})})):a.$Message.error("Fail!")})}},mounted:function(){this.pageChange(1),this.getClass(),this.getDiscount(),this.getZone()}},p=u,m=(e("dd9b"),e("2877")),f=Object(m["a"])(p,o,r,!1,null,"f243959c",null);a["default"]=f.exports}}]);